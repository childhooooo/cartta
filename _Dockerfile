FROM rust:1.30.0

WORKDIR /app

RUN rustup override set nightly && \
    cargo update && \
    cargo install diesel_cli --no-default-features --features postgres && \
    cargo install cargo-watch

#COPY . /app

#CMD bash -c "export ROCKET_DATABASES={postgres_database={url=\"${DATABASE_URL}\"}} && diesel setup && ROCKET_PORT=$PORT ROCKET_ENV=production cargo run"